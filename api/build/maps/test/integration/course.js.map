{"version":3,"sources":["test/integration/course.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,6BAA6B;AAC7B,6CAAwC;AACxC,gEAA2D;AAC3D,0DAAqD;AACrD,gDAA2C;AAC3C,oDAA6D;AAK7D,8DAAyD;AACzD,sCAAuC;AACvC,2BAAgC;AAChC,oEAA+D;AAC/D,6DAA2D;AAE3D,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACnB,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;AAC7B,MAAM,GAAG,GAAG,IAAI,eAAM,EAAE,CAAC,GAAG,CAAC;AAC7B,MAAM,QAAQ,GAAG,cAAc,CAAC;AAChC,MAAM,aAAa,GAAG,IAAI,6BAAa,EAAE,CAAC;AAE1C,QAAQ,CAAC,QAAQ,EAAE,GAAG,EAAE;IACtB,yCAAyC;IACzC,UAAU,CAAC,GAAS,EAAE;QACpB,MAAM,aAAa,CAAC,IAAI,EAAE,CAAC;IAC7B,CAAC,CAAA,CAAC,CAAC;IAEH,QAAQ,CAAC,OAAO,QAAQ,EAAE,EAAE,GAAG,EAAE;QAC/B,EAAE,CAAC,kCAAkC,EAAE,GAAS,EAAE;YAChD,MAAM,OAAO,GAAG,MAAM,eAAM,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;YAClD,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;YAEtD,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,QAAQ,CAAC;iBACb,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAC7D,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;YAC9B,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAE9C,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAW,EAAE,EAAE;gBAC/B,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBACjC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBAClC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBACrC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACtC,CAAC,CAAC,CAAC;QACL,CAAC,CAAA,CAAC,CAAC;QAGH,EAAE,CAAC,2BAA2B,EAAE,GAAS,EAAE;YACzC,MAAM,OAAO,GAAG,MAAM,eAAM,CAAC,IAAI,EAAE,CAAC;YACpC,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;YACtD,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,QAAQ,CAAC;iBACb,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAC7D,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;YAC9B,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAE9C,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAW,EAAE,EAAE;gBAC/B,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBACjC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;gBAClC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBACrC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;YAC/C,CAAC,CAAC,CAAC;QACL,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,sCAAsC,EAAE,GAAS,EAAE;YACpD,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,QAAQ,CAAC;iBACb,GAAG,CAAC,eAAe,EAAE,UAAU,CAAC;iBAChC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC5B,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACpC,CAAC,CAAA,CAAC,CAAC;QAGH,EAAE,CAAC,0DAA0D,EAAE,GAAS,EAAE;YACxE,MAAM,MAAM,GAAG,MAAM,eAAM,CAAC,OAAO,CAAC,EAAC,UAAU,EAAE,WAAW,EAAC,CAAC,CAAC;YAC/D,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QACvB,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,yCAAyC,EAAE,GAAS,EAAE;YACvD,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;YAEtD,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,QAAQ,CAAC;iBACb,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAC7D,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAEhC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAW,EAAE,EAAE;gBAC/B,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;QACL,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,QAAQ,QAAQ,EAAE,EAAE,GAAG,EAAE;QAChC,EAAE,CAAC,yBAAyB,EAAE,GAAS,EAAE;YACvC,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;YACtD,MAAM,QAAQ,GAAG;gBACf,IAAI,EAAE,aAAa;gBACnB,WAAW,EAAE,kBAAkB;aAChC,CAAC;YAEF,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,QAAQ,CAAC;iBACd,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC;iBACzD,IAAI,CAAC,QAAQ,CAAC,CAAC;YAClB,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC1C,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAC1D,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAGH,QAAQ,CAAC,OAAO,QAAQ,MAAM,EAAE,GAAG,EAAE;QACnC,SAAe,iBAAiB;;gBAC9B,MAAM,QAAQ,GAAG,MAAM,2BAAY,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC5D,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC5B,MAAM,mBAAmB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACxC,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;gBACtD,MAAM,QAAQ,GAAG,IAAI,eAAM,CAAC;oBAC1B,IAAI,EAAE,aAAa;oBACnB,WAAW,EAAE,kBAAkB;oBAC/B,MAAM,EAAE,IAAI;oBACZ,WAAW,EAAE,OAAO;oBACpB,QAAQ,EAAE,CAAC,OAAO,CAAC;oBACnB,UAAU,EAAE,WAAW;oBACvB,SAAS,EAAE,eAAe;oBAC1B,aAAa,EAAE,QAAQ;oBACvB,QAAQ,EAAE,CAAC,OAAO,CAAC;iBACpB,CAAC,CAAC;gBACH,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;gBAC1C,OAAO,EAAC,OAAO,EAAE,mBAAmB,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAC,CAAC;YACxE,CAAC;SAAA;QAED,SAAe,6BAA6B,CAAC,WAAyB,EAAE,IAAW;;gBACjF,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;qBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,OAAO,CAAC;qBAC1C,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAE1D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAChC,OAAO,GAAG,CAAC;YACb,CAAC;SAAA;QAED,SAAS,4BAA4B,CAAC,MAA0B,EAAE,QAA4B;YAC5F,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;YACpD,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YACrE,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YACnE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC/C,CAAC;QAED,EAAE,CAAC,+CAA+C,EAAE,GAAS,EAAE;YAC7D,MAAM,EAAC,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAC,GAAG,MAAM,iBAAiB,EAAE,CAAC;YAEnE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,EAAE,CAAC;iBACrC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAE7D,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE5B,MAAM,IAAI,GAAgB,GAAG,CAAC,IAAI,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACvD,4BAA4B,CAAC,IAAI,CAAC,WAAW,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;YACrE,KAAK,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE;gBACrD,4BAA4B,CAAC,MAAM,EAAE,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;aAChE;YAED,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAC9C,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,GAAS,EAAE;YAC7D,MAAM,EAAC,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAC,GAAG,MAAM,iBAAiB,EAAE,CAAC;YAEnE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,OAAO,CAAC;iBAC1C,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAE7D,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE5B,MAAM,IAAI,GAAY,GAAG,CAAC,IAAI,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACzC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACvD,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAC7C,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YACnD,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAC7D,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,gDAAgD,EAAE,GAAS,EAAE;YAC9D,MAAM,EAAC,WAAW,EAAE,OAAO,EAAC,GAAG,MAAM,iBAAiB,EAAE,CAAC;YACzD,MAAM,GAAG,GAAG,MAAM,6BAA6B,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;YACtE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;YACnD,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YACzC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACzC,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,6DAA6D,EAAE,GAAS,EAAE;YAC3E,MAAM,EAAC,WAAW,EAAE,mBAAmB,EAAC,GAAG,MAAM,iBAAiB,EAAE,CAAC;YACrE,MAAM,GAAG,GAAG,MAAM,6BAA6B,CAAC,WAAW,EAAE,mBAAmB,CAAC,CAAC;YAClF,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAC,CAAC;YACnE,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACzC,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,+CAA+C,EAAE,GAAS,EAAE;YAC7D,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3D,MAAM,QAAQ,GAAG,IAAI,eAAM,CAAC;gBAC1B,IAAI,EAAE,aAAa;gBACnB,WAAW,EAAE,kBAAkB;gBAC/B,MAAM,EAAE,IAAI;gBACZ,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG;aAC5B,CAAC,CAAC;YACH,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;YAE1C,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,EAAE,CAAC;iBACrC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;iBAC5D,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE9B,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAC9B,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,OAAO,QAAQ,MAAM,EAAE,GAAG,EAAE;QACnC,EAAE,CAAC,qBAAqB,EAAE,GAAS,EAAE;YACnC,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;YACtD,MAAM,cAAc,GAAG,IAAI,eAAM,CAC/B;gBACE,IAAI,EAAE,oBAAoB;gBAC1B,WAAW,EAAE,yBAAyB;gBACtC,MAAM,EAAE,IAAI;gBACZ,WAAW,EAAE,OAAO,CAAC,GAAG;gBACxB,aAAa,EAAE,QAAQ;aACxB,CAAC,CAAC;YACL,MAAM,QAAQ,GAAG,IAAI,eAAM,CACzB;gBACE,IAAI,EAAE,aAAa;gBACnB,WAAW,EAAE,kBAAkB;gBAC/B,MAAM,EAAE,KAAK;gBACb,WAAW,EAAE,OAAO,CAAC,GAAG;aACzB,CAAC,CAAC;YACL,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;YAC1C,cAAc,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC;YAErC,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAC9B,GAAG,CAAC,GAAG,QAAQ,IAAI,cAAc,CAAC,GAAG,EAAE,CAAC;iBACxC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC;iBACzD,IAAI,CAAC,cAAc,CAAC,CAAC;YAExB,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAChD,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;YAE7C,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAC1B,GAAG,CAAC,GAAG,QAAQ,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC;iBACvC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAE7D,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAChD,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;YAC9D,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YACpD,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;QACpE,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,kDAAkD,EAAE,GAAS,EAAE;YAChE,MAAM,OAAO,GAAG,MAAM,2BAAY,CAAC,gBAAgB,EAAE,CAAC;YACtD,MAAM,QAAQ,GAAG,IAAI,eAAM,CACzB;gBACE,IAAI,EAAE,aAAa;gBACnB,WAAW,EAAE,kBAAkB;gBAC/B,MAAM,EAAE,KAAK;aACd,CAAC,CAAC;YACL,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;YAC1C,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,WAAW,CAAC,GAAG,EAAE,CAAC;iBACrC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC;iBACzD,IAAI,CAAC,WAAW,CAAC;iBACjB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE9B,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAC9B,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,gBAAgB,QAAQ,EAAE,EAAE,GAAG,EAAE;QACxC,EAAE,CAAC,gCAAgC,EAAE,GAAS,EAAE;YAC9C,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,EAC9C,CAAE,EAAE,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAExF,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,wDAAwD,EAAE,GAAS,EAAE;YACtE,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,EAC9C,CAAE,EAAE,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE5E,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,yDAAyD,EAAE,GAAS,EAAE;YACvE,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,EAC9C,CAAE,EAAE,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE7E,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,sDAAsD,EAAE,GAAS,EAAE;YACpE,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,iCAAiC,CAAC,EAAE,UAAU,CAAC;iBAC3E,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,EAC9C,CAAE,EAAE,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAExF,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAClC,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,4DAA4D,EAAE,GAAS,EAAE;YAC1E,+CAA+C;YAE/C,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAC9C,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;gBACjC,WAAW,EACT,CAAC,EAAC,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAC,CAAC;aAC9E,CAAC,CAAC,CAAC;YAEN,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC1C,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAE1D,oCAAoC;YACpC,MAAM,cAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE5D,MAAM,wBAAwB,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBACrD,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,EAC5C,CAAE,EAAE,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE1F,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACjD,wBAAwB,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACnE,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,yDAAyD,EAAE,GAAS,EAAE;YACvE,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,mBAAmB,GAAG,MAAM,2BAAY,CAAC,+BAA+B,CAAC,MAAM,CAAC,CAAC;YAEvF,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,mBAAmB,CAAC,EAAE,CAAC;iBACrE,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;gBACjC,WAAW,EACT,CAAC,EAAC,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAC,CAAC;aAC9E,CAAC,CAAC,CAAC;YAEN,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAClC,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,kBAAkB,QAAQ,EAAE,EAAE,GAAG,EAAE;QAC1C,EAAE,CAAC,2CAA2C,EAAE,GAAS,EAAE;YAEzD,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAC9B,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;gBACjC,WAAW,EACT,CAAC,EAAC,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAC,CAAC;aAC9E,CAAC,CAAC,CAAC;YAEN,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAE5C,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAC1B,GAAG,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACxC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,IAAI,EAAE,CAAC;YAEV,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE5B,MAAM,aAAa,GAAG,MAAM,eAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACxD,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAExC,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,wDAAwD,EAAE,GAAS,EAAE;YACtE,+CAA+C;YAE/C,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAC9C,IAAI,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACzC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,MAAM,CAAC,MAAM,EAAE,iBAAY,CAAC,yBAAyB,CAAC,EAAE,UAAU,CAAC;iBACnE,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;gBACjC,WAAW,EACT,CAAC,EAAC,UAAU,EAAE,+BAAc,CAAC,MAAM,EAAE,SAAS,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAC,EAAC,CAAC;aAC9E,CAAC,CAAC,CAAC;YAEN,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC1C,iBAAiB,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAE1D,oCAAoC;YACpC,MAAM,cAAO,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAE5D,MAAM,oBAAoB,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBACjD,GAAG,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACxC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC;iBAC7D,IAAI,EAAE,CAAC;YAEV,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAE7C,MAAM,aAAa,GAAG,MAAM,eAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACxD,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACxC,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,yDAAyD,EAAE,GAAS,EAAE;YACvE,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,mBAAmB,GAAG,MAAM,2BAAY,CAAC,+BAA+B,CAAC,MAAM,CAAC,CAAC;YAEvF,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,YAAY,MAAM,CAAC,GAAG,EAAE,CAAC;iBACxC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,mBAAmB,CAAC,EAAE,CAAC;iBACrE,IAAI,EAAE,CAAC;YAEV,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAClC,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,QAAQ,EAAE,EAAE,GAAG,EAAE;QAClC,EAAE,CAAC,0BAA0B,EAAE,GAAS,EAAE;YACxC,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,WAAW,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,MAAM,CAAC,WAAW,EAAC,CAAC,CAAC;YAElE,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC;iBAChC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;YAEjE,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAChC,MAAM,aAAa,GAAG,MAAM,eAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACxD,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,aAAa,EAAE,yBAAyB,CAAC,CAAC;QAC7D,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,gDAAgD,EAAE,GAAS,EAAE;YAC9D,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YAEpD,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC;iBAChC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE9B,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,CAAC,CAAA,CAAC,CAAC;QAEH,EAAE,CAAC,sDAAsD,EAAE,GAAS,EAAE;YACpE,MAAM,MAAM,GAAG,MAAM,2BAAY,CAAC,eAAe,EAAE,CAAC;YACpD,MAAM,oBAAoB,GAAG,MAAM,CAAC,QAAQ,CAAC;YAC7C,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YAC9C,MAAM,IAAI,GAAG,MAAM,WAAI,CAAC,OAAO,CAAC;gBAC9B,IAAI,EAAE;oBACJ,EAAC,IAAI,EAAE,SAAS,EAAC;oBACjB,EAAC,GAAG,EAAE,EAAC,IAAI,EAAE,oBAAoB,EAAC,EAAC;iBACpC;aACF,CAAC,CAAC;YACH,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;iBAChC,GAAG,CAAC,GAAG,QAAQ,IAAI,MAAM,CAAC,GAAG,EAAE,CAAC;iBAChC,GAAG,CAAC,QAAQ,EAAE,SAAS,mBAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC;iBACtD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAE9B,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","file":"../../../test/integration/course.js","sourcesContent":["import * as chai from 'chai';\r\nimport {Server} from '../../src/server';\r\nimport {FixtureLoader} from '../../fixtures/FixtureLoader';\r\nimport {JwtUtils} from '../../src/security/JwtUtils';\r\nimport {User} from '../../src/models/User';\r\nimport {Course, ICourseModel} from '../../src/models/Course';\r\nimport {ICourse} from '../../../shared/models/ICourse';\r\nimport {ICourseView} from '../../../shared/models/ICourseView';\r\nimport {IUserSubCourseView} from '../../../shared/models/IUserSubCourseView';\r\nimport {IUser} from '../../../shared/models/IUser';\r\nimport {FixtureUtils} from '../../fixtures/FixtureUtils';\r\nimport chaiHttp = require('chai-http');\r\nimport {readFileSync} from 'fs';\r\nimport {BreakpointSize} from '../../src/models/BreakpointSize';\r\nimport {Picture} from '../../src/models/mediaManager/File';\r\n\r\nchai.use(chaiHttp);\r\nconst should = chai.should();\r\nconst app = new Server().app;\r\nconst BASE_URL = '/api/courses';\r\nconst fixtureLoader = new FixtureLoader();\r\n\r\ndescribe('Course', () => {\r\n  // Before each test we reset the database\r\n  beforeEach(async () => {\r\n    await fixtureLoader.load();\r\n  });\r\n\r\n  describe(`GET ${BASE_URL}`, () => {\r\n    it('should return all active courses', async () => {\r\n      const courses = await Course.find({active: true});\r\n      const student = await FixtureUtils.getRandomStudent();\r\n\r\n      const res = await chai.request(app)\r\n        .get(BASE_URL)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(student)}`);\r\n      res.status.should.be.equal(200);\r\n      res.body.should.be.a('array');\r\n      res.body.length.should.be.eql(courses.length);\r\n\r\n      res.body.forEach((course: any) => {\r\n        course._id.should.be.a('string');\r\n        course.name.should.be.a('string');\r\n        course.active.should.be.a('boolean');\r\n        course.active.should.be.equal(true);\r\n      });\r\n    });\r\n\r\n\r\n    it('should return all courses', async () => {\r\n      const courses = await Course.find();\r\n      const teacher = await FixtureUtils.getRandomTeacher();\r\n      const res = await chai.request(app)\r\n        .get(BASE_URL)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher)}`);\r\n      res.status.should.be.equal(200);\r\n      res.body.should.be.a('array');\r\n      res.body.length.should.be.eql(courses.length);\r\n\r\n      res.body.forEach((course: any) => {\r\n        course._id.should.be.a('string');\r\n        course.name.should.be.a('string');\r\n        course.active.should.be.a('boolean');\r\n        course.active.should.be.oneOf([true, false]);\r\n      });\r\n    });\r\n\r\n    it('should fail with wrong authorization', async () => {\r\n      const res = await chai.request(app)\r\n        .get(BASE_URL)\r\n        .set('Authorization', 'JWT asdf')\r\n        .catch(err => err.response);\r\n        res.status.should.be.equal(401);\r\n    });\r\n\r\n\r\n    it('should have a course fixture with \"accesskey\" enrollType', async () => {\r\n      const course = await Course.findOne({enrollType: 'accesskey'});\r\n      should.exist(course);\r\n    });\r\n\r\n    it('should not leak access keys to students', async () => {\r\n      const student = await FixtureUtils.getRandomStudent();\r\n\r\n      const res = await chai.request(app)\r\n        .get(BASE_URL)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(student)}`);\r\n      res.status.should.be.equal(200);\r\n\r\n      res.body.forEach((course: any) => {\r\n        should.equal(course.accessKey, undefined);\r\n      });\r\n    });\r\n  });\r\n\r\n  describe(`POST ${BASE_URL}`, () => {\r\n    it('should add a new course', async () => {\r\n      const teacher = await FixtureUtils.getRandomTeacher();\r\n      const testData = {\r\n        name: 'Test Course',\r\n        description: 'Test description'\r\n      };\r\n\r\n      const res = await chai.request(app)\r\n        .post(BASE_URL)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher)}`)\r\n        .send(testData);\r\n      res.status.should.be.equal(200);\r\n      res.body.name.should.equal(testData.name);\r\n      res.body.description.should.equal(testData.description);\r\n    });\r\n  });\r\n\r\n\r\n  describe(`GET ${BASE_URL} :id`, () => {\r\n    async function prepareTestCourse() {\r\n      const teachers = await FixtureUtils.getRandomTeachers(2, 2);\r\n      const teacher = teachers[0];\r\n      const unauthorizedTeacher = teachers[1];\r\n      const student = await FixtureUtils.getRandomStudent();\r\n      const testData = new Course({\r\n        name: 'Test Course',\r\n        description: 'Test description',\r\n        active: true,\r\n        courseAdmin: teacher,\r\n        teachers: [teacher],\r\n        enrollType: 'accesskey',\r\n        accessKey: 'accessKey1234',\r\n        freeTextStyle: 'theme1',\r\n        students: [student]\r\n      });\r\n      const savedCourse = await testData.save();\r\n      return {teacher, unauthorizedTeacher, student, testData, savedCourse};\r\n    }\r\n\r\n    async function testUnauthorizedGetCourseEdit(savedCourse: ICourseModel, user: IUser) {\r\n      const res = await chai.request(app)\r\n        .get(`${BASE_URL}/${savedCourse._id}/edit`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(user)}`);\r\n\r\n      res.should.not.have.status(200);\r\n      return res;\r\n    }\r\n\r\n    function assertUserCourseViewEquality(actual: IUserSubCourseView, expected: IUserSubCourseView) {\r\n      actual._id.should.be.equal(expected._id.toString());\r\n      actual.profile.firstName.should.be.equal(expected.profile.firstName);\r\n      actual.profile.lastName.should.be.equal(expected.profile.lastName);\r\n      actual.email.should.be.equal(expected.email);\r\n    }\r\n\r\n    it('should get view info for course with given id', async () => {\r\n      const {student, testData, savedCourse} = await prepareTestCourse();\r\n\r\n      const res = await chai.request(app)\r\n        .get(`${BASE_URL}/${savedCourse._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(student)}`);\r\n\r\n      res.should.have.status(200);\r\n\r\n      const body: ICourseView = res.body;\r\n      body.name.should.be.equal(testData.name);\r\n      body.description.should.be.equal(testData.description);\r\n      assertUserCourseViewEquality(body.courseAdmin, testData.courseAdmin);\r\n      for (const [index, actual] of body.teachers.entries()) {\r\n        assertUserCourseViewEquality(actual, testData.teachers[index]);\r\n      }\r\n\r\n      should.equal(res.body.accessKey, undefined);\r\n    });\r\n\r\n    it('should get edit info for course with given id', async () => {\r\n      const {teacher, testData, savedCourse} = await prepareTestCourse();\r\n\r\n      const res = await chai.request(app)\r\n        .get(`${BASE_URL}/${savedCourse._id}/edit`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher)}`);\r\n\r\n      res.should.have.status(200);\r\n\r\n      const body: ICourse = res.body;\r\n      body.name.should.be.equal(testData.name);\r\n      body.description.should.be.equal(testData.description);\r\n      body.active.should.be.equal(testData.active);\r\n      body.enrollType.should.be.equal(testData.enrollType);\r\n      body.accessKey.should.be.equal(testData.accessKey);\r\n      body.freeTextStyle.should.be.equal(testData.freeTextStyle);\r\n    });\r\n\r\n    it('should not get edit info for course as student', async () => {\r\n      const {savedCourse, student} = await prepareTestCourse();\r\n      const res = await testUnauthorizedGetCourseEdit(savedCourse, student);\r\n      res.body.name.should.be.equal('AccessDeniedError');\r\n      res.body.should.have.property('message');\r\n      res.body.should.have.property('stack');\r\n    });\r\n\r\n    it('should not get edit info for course as unauthorized teacher', async () => {\r\n      const {savedCourse, unauthorizedTeacher} = await prepareTestCourse();\r\n      const res = await testUnauthorizedGetCourseEdit(savedCourse, unauthorizedTeacher);\r\n      res.body.name.should.be.oneOf(['NotFoundError', 'ForbiddenError']);\r\n      res.body.should.have.property('stack');\r\n    });\r\n\r\n    it('should not get course not a teacher of course', async () => {\r\n      const teacher = await FixtureUtils.getRandomTeachers(2, 2);\r\n      const testData = new Course({\r\n        name: 'Test Course',\r\n        description: 'Test description',\r\n        active: true,\r\n        courseAdmin: teacher[0]._id\r\n      });\r\n      const savedCourse = await testData.save();\r\n\r\n      const res = await chai.request(app)\r\n        .get(`${BASE_URL}/${savedCourse._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher[1])}`)\r\n        .catch(err => err.response);\r\n\r\n      res.should.have.status(404);\r\n    });\r\n  });\r\n\r\n  describe(`PUT ${BASE_URL} :id`, () => {\r\n    it('change added course', async () => {\r\n      const teacher = await FixtureUtils.getRandomTeacher();\r\n      const testDataUpdate = new Course(\r\n        {\r\n          name: 'Test Course Update',\r\n          description: 'Test description update',\r\n          active: true,\r\n          courseAdmin: teacher._id,\r\n          freeTextStyle: 'theme1'\r\n        });\r\n      const testData = new Course(\r\n        {\r\n          name: 'Test Course',\r\n          description: 'Test description',\r\n          active: false,\r\n          courseAdmin: teacher._id\r\n        });\r\n      const savedCourse = await testData.save();\r\n      testDataUpdate._id = savedCourse._id;\r\n\r\n      let res = await chai.request(app)\r\n        .put(`${BASE_URL}/${testDataUpdate._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher)}`)\r\n        .send(testDataUpdate);\r\n\r\n      res.should.have.status(200);\r\n      res.body.name.should.be.eq(testDataUpdate.name);\r\n      res.body._id.should.be.eq(testDataUpdate.id);\r\n\r\n      res = await chai.request(app)\r\n        .get(`${BASE_URL}/${res.body._id}/edit`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher)}`);\r\n\r\n      res.should.have.status(200);\r\n      res.body.name.should.be.eq(testDataUpdate.name);\r\n      res.body.description.should.be.eq(testDataUpdate.description);\r\n      res.body.active.should.be.eq(testDataUpdate.active);\r\n      res.body.freeTextStyle.should.be.eq(testDataUpdate.freeTextStyle);\r\n    });\r\n\r\n    it('should not change course not a teacher of course', async () => {\r\n      const teacher = await FixtureUtils.getRandomTeacher();\r\n      const testData = new Course(\r\n        {\r\n          name: 'Test Course',\r\n          description: 'Test description',\r\n          active: false\r\n        });\r\n      const savedCourse = await testData.save();\r\n      const res = await chai.request(app)\r\n        .put(`${BASE_URL}/${savedCourse._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(teacher)}`)\r\n        .send(savedCourse)\r\n        .catch(err => err.response);\r\n\r\n      res.should.have.status(404);\r\n    });\r\n  });\r\n\r\n  describe(`POST PICTURE ${BASE_URL}`, () => {\r\n    it('should update the course image', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const res = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({ breakpoints:\r\n          [ { screenSize: BreakpointSize.MOBILE, imageSize: { width: 284, height: 190} }] }));\r\n\r\n      res.should.have.status(200);\r\n      res.body.breakpoints.length.should.be.eq(1);\r\n    });\r\n\r\n    it('should update the course image with only the width set', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const res = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({ breakpoints:\r\n          [ { screenSize: BreakpointSize.MOBILE, imageSize: { width: 284 } }] }));\r\n\r\n      res.should.have.status(200);\r\n      res.body.breakpoints.length.should.be.eq(1);\r\n    });\r\n\r\n    it('should update the course image with only the height set', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const res = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({ breakpoints:\r\n          [ { screenSize: BreakpointSize.MOBILE, imageSize: { height: 190 } }] }));\r\n\r\n      res.should.have.status(200);\r\n      res.body.breakpoints.length.should.be.eq(1);\r\n    });\r\n\r\n    it('should not update the course image (wrong file type)', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const res = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/wrong-format.rtf'), 'test.rtf')\r\n        .field('imageData', JSON.stringify({ breakpoints:\r\n          [ { screenSize: BreakpointSize.MOBILE, imageSize: { width: 284, height: 190} }] }));\r\n\r\n      res.should.not.have.status(200);\r\n    });\r\n\r\n    it('should update course image when old picture object missing', async () => {\r\n      // https://github.com/geli-lms/geli/issues/1053\r\n\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const resAddCourseImage = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({\r\n          breakpoints:\r\n            [{screenSize: BreakpointSize.MOBILE, imageSize: {width: 284, height: 190}}]\r\n        }));\r\n\r\n      resAddCourseImage.should.have.status(200);\r\n      resAddCourseImage.body.breakpoints.length.should.be.eq(1);\r\n\r\n      // delete picture object without api\r\n      await Picture.findByIdAndDelete(resAddCourseImage.body._id);\r\n\r\n      const resAddAnotherCourseImage = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({ breakpoints:\r\n            [ { screenSize: BreakpointSize.MOBILE, imageSize: { width: 284, height: 190} }] }));\r\n\r\n      resAddAnotherCourseImage.should.have.status(200);\r\n      resAddAnotherCourseImage.body.breakpoints.length.should.be.eq(1);\r\n    });\r\n\r\n    it('should not update course image when user not authorized', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const unauthorizedTeacher = await FixtureUtils.getUnauthorizedTeacherForCourse(course);\r\n\r\n      const res = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(unauthorizedTeacher)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({\r\n          breakpoints:\r\n            [{screenSize: BreakpointSize.MOBILE, imageSize: {width: 284, height: 190}}]\r\n        }));\r\n\r\n      res.should.not.have.status(200);\r\n    });\r\n  });\r\n\r\n  describe(`DELETE PICTURE ${BASE_URL}`, () => {\r\n    it('should update and remove the course image', async () => {\r\n\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      let res = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({\r\n          breakpoints:\r\n            [{screenSize: BreakpointSize.MOBILE, imageSize: {width: 284, height: 190}}]\r\n        }));\r\n\r\n      res.should.have.status(200);\r\n      res.body.breakpoints.length.should.be.eq(1);\r\n\r\n      res = await chai.request(app)\r\n        .del(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .send();\r\n\r\n      res.should.have.status(200);\r\n\r\n      const updatedCourse = await Course.findById(course._id);\r\n      should.not.exist(updatedCourse.image);\r\n\r\n    });\r\n\r\n    it('should remove course image when picture object missing', async () => {\r\n      // https://github.com/geli-lms/geli/issues/1053\r\n\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const resAddCourseImage = await chai.request(app)\r\n        .post(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .attach('file', readFileSync('test/resources/test.png'), 'test.png')\r\n        .field('imageData', JSON.stringify({\r\n          breakpoints:\r\n            [{screenSize: BreakpointSize.MOBILE, imageSize: {width: 284, height: 190}}]\r\n        }));\r\n\r\n      resAddCourseImage.should.have.status(200);\r\n      resAddCourseImage.body.breakpoints.length.should.be.eq(1);\r\n\r\n      // delete picture object without api\r\n      await Picture.findByIdAndDelete(resAddCourseImage.body._id);\r\n\r\n      const resDeleteCourseImage = await chai.request(app)\r\n        .del(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`)\r\n        .send();\r\n\r\n      resDeleteCourseImage.should.have.status(200);\r\n\r\n      const updatedCourse = await Course.findById(course._id);\r\n      should.not.exist(updatedCourse.image);\r\n    });\r\n\r\n    it('should not delete course image when user not authorized', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const unauthorizedTeacher = await FixtureUtils.getUnauthorizedTeacherForCourse(course);\r\n\r\n      const res = await chai.request(app)\r\n        .del(`${BASE_URL}/picture/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(unauthorizedTeacher)}`)\r\n        .send();\r\n\r\n      res.should.not.have.status(200);\r\n    });\r\n  });\r\n\r\n  describe(`DELETE ${BASE_URL}`, () => {\r\n    it('should delete the Course', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const courseAdmin = await User.findOne({_id: course.courseAdmin});\r\n\r\n      const res = await chai.request(app)\r\n        .del(`${BASE_URL}/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(courseAdmin)}`);\r\n\r\n      res.status.should.be.equal(200);\r\n      const deletedCourse = await Course.findById(course._id);\r\n      should.not.exist(deletedCourse, 'Course does still exist');\r\n    });\r\n\r\n    it('should fail because the user is not authorized', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n\r\n      const res = await chai.request(app)\r\n        .del(`${BASE_URL}/${course._id}`)\r\n        .catch(err => err.response);\r\n\r\n      res.status.should.be.equal(401);\r\n    });\r\n\r\n    it('should fail because the teacher is not in the course', async () => {\r\n      const course = await FixtureUtils.getRandomCourse();\r\n      const allTeachersAndAdmins = course.teachers;\r\n      allTeachersAndAdmins.push(course.courseAdmin);\r\n      const user = await User.findOne({\r\n        $and: [\r\n          {role: 'teacher'},\r\n          {_id: {$nin: allTeachersAndAdmins}}\r\n        ]\r\n      });\r\n      const res = await chai.request(app)\r\n        .del(`${BASE_URL}/${course._id}`)\r\n        .set('Cookie', `token=${JwtUtils.generateToken(user)}`)\r\n        .catch(err => err.response);\r\n\r\n      res.status.should.be.equal(403);\r\n    });\r\n  });\r\n});\r\n"]}