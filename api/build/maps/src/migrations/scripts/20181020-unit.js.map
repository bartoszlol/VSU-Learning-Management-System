{"version":3,"sources":["src/migrations/scripts/20181020-unit.ts"],"names":[],"mappings":";AAAA,4BAA4B;;;;;;;;;AAE5B,kDAAyD;AAEzD,MAAM,qBAAqB;IAEnB,EAAE;;YACN,MAAM,cAAc,GAAiB,MAAM,WAAI,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,EAAC,OAAO,EAAE,KAAK,EAAC,EAAC,CAAC,CAAC;YAElF,KAAK,MAAM,IAAI,IAAI,cAAc,EAAE;gBACjC,IAAI;oBACF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACpB,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;iBACnB;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,GAAG,CAAC,kCAAkC,GAAG,IAAI,CAAC,IAAI,GAAG,UAAU,GAAG,KAAK,CAAC,CAAC;iBAClF;aACF;YAED,OAAO,IAAI,CAAC;QACd,CAAC;KAAA;CACF;AAED,iBAAS,qBAAqB,CAAC","file":"../../../../src/migrations/scripts/20181020-unit.js","sourcesContent":["// tslint:disable:no-console\r\n\r\nimport {IUnitModel, Unit} from '../../models/units/Unit';\r\n\r\nclass UnitMigration20181020 {\r\n\r\n  async up() {\r\n    const noVisibleField: IUnitModel[] = await Unit.find({visible: {$exists: false}});\r\n\r\n    for (const unit of noVisibleField) {\r\n      try {\r\n        unit.visible = true;\r\n        await unit.save();\r\n      } catch (error) {\r\n        console.log('Could not add \"visible\" to unit ' + unit.name + ' error: ' + error);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport = UnitMigration20181020;\r\n"]}